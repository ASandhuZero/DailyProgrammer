'use strict';

var CleanCSS = require('clean-css');

function styleParser(styleObjectArray) {
    return new Promise(function (resolve) {
        if (!styleObjectArray || styleObjectArray.length === 0) {
            resolve('');
        } else {
            var _iteratorNormalCompletion = true;
            var _didIteratorError = false;
            var _iteratorError = undefined;

            try {
                for (var _iterator = styleObjectArray[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                    var styleObject = _step.value;

                    if (styleObject.lang === 'scss' || styleObject.lang === 'less') {
                        console.error('Sorry please only use plain CSS in your files for now');
                    }
                    var output = new CleanCSS({}).minify(styleObject.content);
                    resolve(output.styles);
                }
            } catch (err) {
                _didIteratorError = true;
                _iteratorError = err;
            } finally {
                try {
                    if (!_iteratorNormalCompletion && _iterator.return) {
                        _iterator.return();
                    }
                } finally {
                    if (_didIteratorError) {
                        throw _iteratorError;
                    }
                }
            }
        }
    });
}

module.exports = styleParser;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9wYXJzZXIvc3R5bGUuanMiXSwibmFtZXMiOlsiQ2xlYW5DU1MiLCJyZXF1aXJlIiwic3R5bGVQYXJzZXIiLCJzdHlsZU9iamVjdEFycmF5IiwiUHJvbWlzZSIsInJlc29sdmUiLCJsZW5ndGgiLCJzdHlsZU9iamVjdCIsImxhbmciLCJjb25zb2xlIiwiZXJyb3IiLCJvdXRwdXQiLCJtaW5pZnkiLCJjb250ZW50Iiwic3R5bGVzIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7QUFDQSxJQUFNQSxXQUFXQyxRQUFRLFdBQVIsQ0FBakI7O0FBV0EsU0FBU0MsV0FBVCxDQUFxQkMsZ0JBQXJCLEVBQTJFO0FBQ3ZFLFdBQU8sSUFBSUMsT0FBSixDQUFZLFVBQUNDLE9BQUQsRUFBYTtBQUM1QixZQUFJLENBQUNGLGdCQUFELElBQXFCQSxpQkFBaUJHLE1BQWpCLEtBQTRCLENBQXJELEVBQXdEO0FBQ3BERCxvQkFBUSxFQUFSO0FBQ0gsU0FGRCxNQUVPO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQ0gscUNBQTBCRixnQkFBMUIsOEhBQTRDO0FBQUEsd0JBQWpDSSxXQUFpQzs7QUFDeEMsd0JBQUdBLFlBQVlDLElBQVosS0FBcUIsTUFBckIsSUFBK0JELFlBQVlDLElBQVosS0FBcUIsTUFBdkQsRUFBK0Q7QUFDM0RDLGdDQUFRQyxLQUFSLENBQWMsdURBQWQ7QUFDSDtBQUNELHdCQUFNQyxTQUFTLElBQUlYLFFBQUosQ0FBYSxFQUFiLEVBQWlCWSxNQUFqQixDQUF3QkwsWUFBWU0sT0FBcEMsQ0FBZjtBQUNBUiw0QkFBUU0sT0FBT0csTUFBZjtBQUNIO0FBUEU7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQVFOO0FBQ0osS0FaTSxDQUFQO0FBYUg7O0FBRURDLE9BQU9DLE9BQVAsR0FBaUJkLFdBQWpCIiwiZmlsZSI6InN0eWxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQGZsb3dcbmNvbnN0IENsZWFuQ1NTID0gcmVxdWlyZSgnY2xlYW4tY3NzJyk7XG5cbnR5cGUgU3R5bGVPYmplY3RUeXBlID0ge1xuICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgIGNvbnRlbnQ6ICdzdHJpbmcnLFxuICAgIHN0YXJ0OiBudW1iZXIsXG4gICAgYXR0cnM6IE9iamVjdCxcbiAgICBsYW5nOiB7IGxhbmc6IHN0cmluZyB9LFxuICAgIGVuZDogbnVtYmVyXG4gfVxuXG5mdW5jdGlvbiBzdHlsZVBhcnNlcihzdHlsZU9iamVjdEFycmF5OiBTdHlsZU9iamVjdFR5cGVbXSk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgIGlmICghc3R5bGVPYmplY3RBcnJheSB8fCBzdHlsZU9iamVjdEFycmF5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmVzb2x2ZSgnJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHN0eWxlT2JqZWN0IG9mIHN0eWxlT2JqZWN0QXJyYXkpIHtcbiAgICAgICAgICAgICAgICBpZihzdHlsZU9iamVjdC5sYW5nID09PSAnc2NzcycgfHwgc3R5bGVPYmplY3QubGFuZyA9PT0gJ2xlc3MnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NvcnJ5IHBsZWFzZSBvbmx5IHVzZSBwbGFpbiBDU1MgaW4geW91ciBmaWxlcyBmb3Igbm93Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IG5ldyBDbGVhbkNTUyh7fSkubWluaWZ5KHN0eWxlT2JqZWN0LmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUob3V0cHV0LnN0eWxlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzdHlsZVBhcnNlcjtcbiJdfQ==